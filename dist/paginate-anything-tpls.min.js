// angular-paginate-anything - v4.1.4
!function(){"use strict";function a(a){var b=[1,2.5,5];return Math.floor(Math.pow(10,Math.floor(a/3))*b[a%3])}function b(a){if(1>a)return 0;var b=Math.floor(Math.log(a)/Math.LN10),c=a/(2.5*Math.pow(10,b));return c>=3&&(b++,c=0),3*b+Math.round(Math.min(2,c))}function c(c){return c===1/0?1/0:a(b(c))}function d(a,b){return a=angular.isArray(a)?a:[a],b?a.concat(b):a}function e(a){var b=a&&a.match(/^(?:items )?(\d+)-(\d+)\/(\d+|\*)$/);return b?{from:+b[1],to:+b[2],total:"*"===b[3]?1/0:+b[3]}:"*/0"===a?{total:0}:null}function f(a){return a.to-a.from+1}angular.module("bgf.paginateAnything",[]).directive("bgfPagination",function(){var g=3,h=250,i=50;return{restrict:"AE",scope:{url:"=",collection:"=",urlParams:"=?",headers:"=?",page:"=?",perPage:"=?",perPagePresets:"=?",autoPresets:"=?",clientLimit:"=?",linkGroupSize:"=?",reloadPage:"=?",size:"=?",passive:"@",transformResponse:"=?",method:"@",postData:"=?",numPages:"=?",numItems:"=?",serverLimit:"=?",rangeFrom:"=?",rangeTo:"=?"},templateUrl:function(a,b){return b.templateUrl||"src/paginate-anything.html"},replace:!0,controller:["$rootScope","$scope","$http",function(j,k,l){function m(c){k.$emit("pagination:loadStart",c),l({method:k.method||"GET",url:k.url,params:k.urlParams,data:k.postData,headers:angular.extend({},k.headers,{"Range-Unit":"items",Range:[c.from,c.to].join("-")}),transformResponse:d(l.defaults.transformResponse,k.transformResponse)}).success(function(d,g,h,j){var l=e(h("Content-Range"));if(204===g||l&&0===l.total?(k.numItems=0,k.collection=[]):(k.numItems=l?l.total:d.length,k.collection=d||[]),l&&(k.rangeFrom=l.from,k.rangeTo=l.to,f(l)<l.total&&(c.to<l.total-1||l.to<l.total-1&&l.total<c.to)&&(!k.perPage||f(l)<k.perPage))){if(k.autoPresets){var m=b(f(l));a(m)>f(l)&&m--,k.serverLimit=a(m)}else k.serverLimit=f(l);k.perPage=k.Math.min(k.serverLimit,k.clientLimit)}k.numPages=Math.ceil(k.numItems/(k.perPage||i)),k.$emit("pagination:loadPage",g,j)}).error(function(a,b,c,d){k.$emit("pagination:error",b,d)})}k.reloadPage=!1,k.serverLimit=1/0,k.Math=window.Math,"boolean"!=typeof k.autoPresets&&(k.autoPresets=!0);var n=k.linkGroupSize,o=k.clientLimit;k.linkGroupSize="number"==typeof n?n:g,k.clientLimit="number"==typeof o?o:h,k.updatePresets=function(){if(k.autoPresets){var c,d=[];for(c=Math.min(3,b(k.perPage||i));c<=b(Math.min(k.clientLimit,k.serverLimit));c++)d.push(a(c));k.perPagePresets=d}else k.perPagePresets=k.perPagePresets.filter(function(a){return a<=k.serverLimit}).concat([k.serverLimit])},k.gotoPage=function(a){0>a||a*k.perPage>=k.numItems||(k.page=a)},k.linkGroupFirst=function(){var a=Math.max(0,k.linkGroupSize-(k.numPages-1-(k.page+2)));return Math.max(0,k.page-(k.linkGroupSize+a))},k.linkGroupLast=function(){var a=Math.max(0,k.linkGroupSize-(k.page-2));return Math.min(k.numPages-1,k.page+(k.linkGroupSize+a))},k.isFinite=function(){return k.numPages<1/0},k.page=k.page||0,k.size=k.size||"md",k.autoPresets&&k.updatePresets(),k.$watch("page",function(a,b){if("true"!==k.passive&&a!==b){if(0>a||a*k.perPage>=k.numItems)return;var d=k.perPage||i;k.autoPresets&&(d=c(d)),m({from:a*d,to:(a+1)*d-1})}}),k.$watch("perPage",function(a,b){if("true"!==k.passive&&"number"==typeof b&&a!==b){var c=k.page*b,d=Math.floor(c/a);k.page!==d?k.page=d:m({from:k.page*a,to:(k.page+1)*a-1})}}),k.$watch("serverLimit",function(a,b){"true"!==k.passive&&a!==b&&k.updatePresets()}),k.$watch("url",function(a,b){"true"!==k.passive&&a!==b&&(0===k.page?k.reloadPage=!0:k.page=0)}),k.$watch("urlParams",function(a,b){"true"!==k.passive&&(angular.equals(a,b)||(0===k.page?k.reloadPage=!0:k.page=0))},!0),k.$watch("headers",function(a,b){"true"!==k.passive&&(angular.equals(a,b)||(0===k.page?k.reloadPage=!0:k.page=0))},!0),k.$watch("reloadPage",function(a,b){"true"!==k.passive&&a===!0&&b===!1&&(k.reloadPage=!1,m({from:k.page*k.perPage,to:(k.page+1)*k.perPage-1}))}),k.$watch("transformResponse",function(a,b){"true"!==k.passive&&a&&b&&(angular.equals(a.toString(),b.toString())||(0===k.page?k.reloadPage=!0:k.page=0))},!0),j.$on("pagination:collection:updated",function(){k.reloadPage=!0});var p=k.perPage||i;k.autoPresets&&(p=c(p)),m({from:k.page*p,to:(k.page+1)*p-1})}]}}).filter("makeRange",function(){return function(a){var b,c;switch(a.length){case 1:b=0,c=parseInt(a[0],10)-1;break;case 2:b=parseInt(a[0],10),c=parseInt(a[1],10);break;default:return a}for(var d=[],e=b;c>=e;e++)d.push(e);return d}})}(),angular.module("bgf.paginateAnything").run(["$templateCache",function(a){"use strict";a.put("src/paginate-anything.html",'<div class=paginate-anything><ul class="pagination pagination-{{size}} links" ng-if="numPages > 1"><li ng-class="{disabled: page <= 0}"><a href ng-click=gotoPage(page-1)>&laquo;</a></li><li ng-if="linkGroupFirst() > 0"><a href ng-click=gotoPage(0)>1</a></li><li ng-if="linkGroupFirst() > 1" class=disabled><a href>&hellip;</a></li><li ng-repeat="p in [linkGroupFirst(), linkGroupLast()] | makeRange" ng-class="{active: p === page}"><a href ng-click=gotoPage(p)>{{p+1}}</a></li><li ng-if="linkGroupLast() < numPages - 2" class=disabled><a href>&hellip;</a></li><li ng-if="isFinite() && linkGroupLast() < numPages - 1"><a href ng-click=gotoPage(numPages-1)>{{numPages}}</a></li><li ng-class="{disabled: page >= numPages - 1}"><a href ng-click=gotoPage(page+1)>&raquo;</a></li></ul><div class=per-page ng-if="perPagePresets.length > 0 && numPages > 1"><select ng-model=$parent.perPage ng-options="p for p in perPagePresets"></select>per page</div></div>')}]);